{% comment %}
  ============================================================================
  Product Grid Component (Visual Only)
  ============================================================================

  @file        _includes/block--products-grid.html
  @description Product grid display for homepage with card layout, images,
               ratings, features, and custom order card.

  @version     1.0.0
  @date        2025-11-22
  @author      jualkayudolkengelam
  @copyright   2024-2025 Kayu Dolken Gelam - Amirudin Abdul Karim
  @license     All rights reserved

  Features:
  ---------
  - Responsive grid layout (3 columns on large, 2 on medium)
  - Product cards with images, ratings, features
  - WhatsApp order buttons
  - Custom order card for special requests
  - Info box with pricing disclaimer

  Parameters:
  -----------
  - title: Custom section heading (default: "Daftar Harga Kayu Dolken Gelam")
  - subtitle: Custom subtitle (default: "Panjang 4 Meter - Berbagai Ukuran Diameter")

  Usage:
  ------
  {% include reusable/block--products-grid.html %}

  {% include reusable/block--products-grid.html title="Produk Kami" %}

  Used in:
  --------
  - index.html (homepage products section)

  ============================================================================
{% endcomment %}

{% assign grid_title = include.title | default: "Daftar Harga" %}
{% assign grid_subtitle = include.subtitle | default: "Kayu Dolken Gelam" %}

<div class="products-industrial">
  <div class="container">
    <!-- Section Header -->
    <div class="section-header-ind">
      <div class="header-label">
        <span class="label-line"></span>
        <span class="label-text">PRODUK KAMI</span>
      </div>
      <h2 class="section-title-ind">
        <span class="title-main">{{ grid_title }}</span>
        <span class="title-accent">{{ grid_subtitle }}</span>
      </h2>
      <p class="section-subtitle-ind">Panjang 4 Meter Â· Berbagai Ukuran Diameter</p>
    </div>

    <!-- Products Grid -->
    <div class="row g-4">
      {% assign sorted_products = site.products | sort: "price" %}
      {% for product in sorted_products %}
      <div class="col-lg-4 col-md-6">
        <div class="product-card-ind{% if product.popular %} is-popular{% endif %}">
          {% if product.popular %}
          <div class="popular-badge">TERLARIS</div>
          {% endif %}

          <!-- Product Image -->
          <a href="{{ product.url | relative_url }}" class="product-image-link">
            {% if product.image %}
            <picture>
              <source srcset="{{ product.image | replace: '.jpeg', '.webp' | relative_url }}" type="image/webp">
              <img src="{{ product.image | relative_url }}"
                   class="product-img-ind"
                   alt="{{ product.title }}"
                   loading="lazy">
            </picture>
            {% endif %}
            <div class="image-overlay-ind"></div>
          </a>

          <!-- Product Info -->
          <div class="product-info-ind">
            <div class="row badge-price">
              <div class="col-lg-6">
                <!-- Diameter Badge -->
                <div class="diameter-badge">
                  <i class="bi bi-rulers"></i>
                  <span>{{ product.diameter }}</span>
                </div>
              </div>
              <div class="col-lg-6">
                <!-- Price -->
                <div class="price-block">
                  <span class="price-currency">Rp</span>
                  <span class="price-amount">{{ product.price | rupiah }}</span>
                  <span class="price-unit">/batang</span>
                </div>

                <!-- Rating -->
                {% if product.rating or product.review_count %}
                <div class="rating-block">
                  {% if product.rating %}
                  <div class="stars">
                    {% assign rating_rounded = product.rating | default: 4.5 | round %}
                    {% for i in (1..5) %}
                      {% if i <= rating_rounded %}
                        <i class="bi bi-star-fill"></i>
                      {% else %}
                        <i class="bi bi-star"></i>
                      {% endif %}
                    {% endfor %}
                  </div>
                  {% endif %}
                  <span class="rating-text">{{ product.rating }} ({{ product.review_count }} ulasan)</span>
                </div>
                {% endif %}
              </div>
            </div>

            <!-- Features -->
            {% if product.features %}
            <ul class="feature-list-ind">
              {% for feature in product.features limit:3 %}
              <li><i class="bi bi-check2"></i>{{ feature }}</li>
              {% endfor %}
            </ul>
            {% endif %}

            <!-- Actions -->
            <div class="product-actions">
              <a href="{{ product.url | relative_url }}" class="btn-detail">
                <span>Detail</span>
                <i class="bi bi-arrow-right"></i>
              </a>
              <a href="https://wa.me/{{ site.business.whatsapp }}?text=Halo,%20saya%20ingin%20pesan%20{{ product.title }}%20-%20Rp%20{{ product.price }}" class="btn-order" target="_blank">
                <i class="bi bi-whatsapp"></i>
                <span>Pesan</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}

      <!-- Custom Order Card -->
      <div class="col-lg-4 col-md-6">
        <div class="custom-order-card">
          <div class="custom-order-content">
            <div class="custom-icon">
              <i class="bi bi-gear-wide-connected"></i>
            </div>
            <h4 class="custom-title">Custom Order</h4>
            <p class="custom-desc">Butuh ukuran khusus atau jumlah besar?</p>
            <ul class="custom-features">
              <li><i class="bi bi-check2"></i>Ukuran sesuai kebutuhan</li>
              <li><i class="bi bi-check2"></i>Harga grosir jumlah besar</li>
              <li><i class="bi bi-check2"></i>Konsultasi gratis</li>
            </ul>
            <a href="https://wa.me/{{ site.business.whatsapp }}?text=Halo,%20saya%20ingin%20konsultasi%20pesanan%20custom" class="btn-custom" target="_blank">
              <i class="bi bi-whatsapp"></i>
              <span>Hubungi Kami</span>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Info Banner -->
    <div class="info-banner-ind">
      <div class="info-icon">
        <i class="bi bi-info-circle"></i>
      </div>
      <div class="info-content">
        <strong>Informasi Pemesanan</strong>
        <p>Harga dapat berubah sewaktu-waktu. Minimal order & ongkir dihitung berdasarkan lokasi.</p>
      </div>
      <a href="https://wa.me/{{ site.business.whatsapp }}?text=Halo,%20saya%20ingin%20tanya%20harga%20dan%20ongkir" class="info-cta" target="_blank">
        <i class="bi bi-whatsapp"></i>
        <span>Tanya Harga</span>
      </a>
    </div>
  </div>
</div>
